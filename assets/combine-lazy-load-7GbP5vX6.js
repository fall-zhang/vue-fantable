import{_ as u,r as f,o as h,a as b,b as m}from"./index-BWOAprk1.js";import{d as p}from"./debounce-D6eaSoDg.js";const y={data(){return{virtualScrollOption:{enable:!0,scrolling:this.scrolling},columns:[{field:"index",key:"a",title:"#",width:100,align:"left"},{field:"name",key:"b",title:"Name",width:200,align:"left"},{field:"hobby",key:"c",title:"Hobby",width:300,align:"left"},{field:"address",key:"d",title:"Address",width:"",align:"left"}],tableData:[],remoteData:[],pagingInfo:{pageSize:20,totalPage:500,totalCount:1e4},debounceTime:150,debounceGetDataByPageIndex:null}},created(){this.initEmptyData(),this.debounceGetDataByPageIndex=p(this.getDataByPageIndex,this.debounceTime)},methods:{initEmptyData(){const a=[],o=this.pagingInfo.totalCount;for(let e=0;e<o;e++)a.push({rowKey:"prefix"+e,index:e,name:"",hobby:"",address:""});this.tableData=a},getDataByPageIndex(a,o){const{remoteData:e,pagingInfo:l}=this,{pageSize:n}=l,i=(a-1)*n,s=(o-1)*n;if(e.find(t=>t.index===i)&&e.find(t=>t.index===s))return!1;const d=a!==o;this.getRemoteData(i,d).then(t=>{Array.isArray(t)&&t.length&&(this.remoteData=this.remoteData.concat(t),t.forEach(r=>{this.tableData.splice(r.index,1,r)}))})},getRemoteData(a,o){console.log(`send request by ${o?"double":"single"} page. start index:${a}`);const{pagingInfo:e}=this,{pageSize:l,totalCount:n}=e;return new Promise((i,s)=>{const d=o?l*2:l,t=[];setTimeout(()=>{for(let r=0;r<d;r++){const c=a+r,g={rowKey:"prefix"+c,index:c,name:"name"+c,hobby:"hobby"+c,address:"address"+c};c<n&&t.push(g)}i(t)},200)})},scrolling({startRowIndex:a,visibleStartIndex:o,visibleEndIndex:e,visibleAboveCount:l,visibleBelowCount:n}){const{pageSize:i}=this.pagingInfo,s=Math.floor(o/i)+1,d=Math.floor(e/i)+1;this.debounceGetDataByPageIndex(s,d)}}};function x(a,o,e,l,n,i){const s=f("fan-table");return h(),b("div",null,[m(s,{"max-height":500,"virtual-scroll-option":n.virtualScrollOption,columns:n.columns,"table-data":n.tableData,"row-key-field-name":"rowKey"},null,8,["virtual-scroll-option","columns","table-data"])])}const _=u(y,[["render",x]]);export{_ as default};
